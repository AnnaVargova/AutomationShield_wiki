# Introduction

FloatShield is a didactic tool based on the Arduino platform. This project has been created as a part of the [AutomationShield](https://www.automationshield.com) project and is aimed at teaching and learning of control engineering concepts. The FloatShield consists of a translucent vertical tunnel containing a ball that is floating inside via an air current generated by a fan. The goal is to control the position of the ball within this column by the means of a feedback controller.	

The basic design of FloatShield consists of a potentiometer, a distance sensor, a translucent vertical tunnel containing a ball (reference item) that is floating inside and a computer fan attached to our own-design PCB. A transparent tube and a distance sensor is mounted by 3D printed parts.
The function principle is based on controlling the distance of the reference item using the PID feedback controller. Manual control is operated by power regulation of the fan through a potentiometer, which is scaled to a pulse width modulated signal (PWM).





<img width="400" alt="pcbback" src="https://user-images.githubusercontent.com/37963774/39856510-8a0526cc-5430-11e8-8727-c349480db9a3.jpg">


# Library functions

## PID


# Example

*[Open-loop control](https://github.com/gergelytakacs/AutomationShield/blob/master/examples/FloatShield_open_loop/FloatShield_open_loop.ino)
 
# Hardware insight 

The Float Shield is an open-source hardware product, dedicated to be widely spread among a control engineering community. Feel free to use any part of it for your own experiments. If you come up with improvements, please let us know so we can improve our design as well. A documentation posted below might help you while working on improvised experimental prototype on breadboard or perforated board. 

## 3D assembly

Firstly, the whole [assembly](https://github.com/gergelytakacs/AutomationShield/files/1942312/assembly.zip) was designed in CAD software and forwarded to 3D print service afterwards. Overall, there are three parts to be printed, a tube clamp, a tube lid and a sensor holder. Feel free to download ready-to-print [parts](https://github.com/gergelytakacs/AutomationShield/files/1977698/parts.zip). Other assembly parts, a [fan](https://grabcad.com/library/fan-40-x-40-x-28-1) and [Arduino microcontroller](https://grabcad.com/library/arduino-uno-r3-4) are downloadable from GrabCAD database.

<img width="600" alt="FloatShield_parts" src="https://user-images.githubusercontent.com/37963774/39174444-154dc80a-47a8-11e8-9d1e-c78b2c2862db.jpg">

## Circuit design

The circuit schematics has been designed in the Freeware version of the DIPTrace CAD software. You may download the circuit schematics of the FloatShield from [here](https://github.com/gergelytakacs/AutomationShield/files/1934584/Float_scheme.zip).

<img width="1800" alt="floatshield_schemepng" src="https://user-images.githubusercontent.com/37963774/38952961-91a10444-434d-11e8-9ab2-7707e9070782.png">

## Components


| Part | Name                       | Value  | PCS | Note                       |
|------|----------------------------|--------|-----|----------------------------|
| POT1 | Potentiometer              | 10 k   | 1   | Pin Size 12.5x10           |
| R1   | Resistor                   | 1 k    | 1   | O2.5x6.8mm                 |
| R2   | Resistor                   | 10 k   | 1   | O2.5x6.8mm                 |
| D1   | Diode                      |        | 1   | 1N4001-DCO                 |
| C1   | Mosfet                     |        | 1   | IRF520N                    |
| J1   | Jumper on sensor           |        | 1   | 2.54mm, 6-pin, 280372-2    |
| J2   | Jumper on fan              |        | 1   | 2.54mm, 2-pin, 280370-2    |
|      | Connector to sensor        |        | 1   | 2.54mm, 6-pin, 280360      |
|      | Connector to fan           |        | 1   | 2.54mm, 2-pin, 280358      |
|      | Conntact to connector      |        | 14  | 2.54mm, 182206-2           |
|      | Fan                        |        | 1   | Sunon PMD1204PQB1          |
|      | Sensor Time of flight      |        | 1   | VL5310X                    |
|      | Wire                       |        | 1   | 1m, VFL 4x0,14             |
|      | Transparent pipe           |        | 1   | diam. 35.5mm, 0.4m         |
|      | Cork ball                  |        | 1   | diam. 30mm                 |
|      | Cotton ball                |        | 1   | diam. 30mm                 |
|      | Polystyrene ball           |        | 1   | diam. 30mm                 |
|      | Plastic profile type U     |        | 1   | 8,0mm x 330mm, hide cable  |
|      | Set shaft on potentiometer |        | 1   | diam. 5mm x 18.7mm, 14187-NE |
|      | Tube clamp                 |        | 1   | 3D printed                 |
|      | Tube lid                   |        | 1   | 3D printed                 |
|      | Sensor holder              |        | 1   | 3D printed                 |
|      | Header                     | 10 pin | 1   | long, stackable            |
|      | Header                     | 8 pin  | 2   | long, stackable            |
|      | Header                     | 6 pin  | 1   | long, stackable            |


## PCB layout

The printed circuit board has been designed in the Freeware version of the [DIPTrace](https://diptrace.com/) CAD software. The PCB is two-layer and fits within the customary 100 x 100 mm limit of most board manufacturers. The DIPTrace PCB layout can be downloaded [here](https://github.com/gergelytakacs/AutomationShield/files/1916198/FloatShield_PCB.zip), while the ready-to-manufacture Gerber files with the NC drilling instructions are available from [here](https://github.com/gergelytakacs/AutomationShield/files/1916200/FloatShield_Gerber.zip).

<img width="500" alt="pcbfront" src="https://user-images.githubusercontent.com/37963774/39986438-ef45542e-5761-11e8-8869-8ff14c35a95a.png">
<img width="500" alt="pcbback" src="https://user-images.githubusercontent.com/37963774/39986439-ef812314-5761-11e8-88a9-eab1ce675225.png">

# Photogallery

<img width="500" alt="pcbfront" src="https://user-images.githubusercontent.com/37963774/39666628-d2997bb4-50a6-11e8-922f-b6e33f5e90ac.jpg"/> 

<img width="500" alt="pcbback" src="https://user-images.githubusercontent.com/37963774/39666630-d528035a-50a6-11e8-9020-083c3e945547.jpg"/>

<img width="500" alt="pcbback" src="https://user-images.githubusercontent.com/37963774/39859055-d32716b4-5438-11e8-82a1-a2bf6ed928e7.JPG">

<img width="500" alt="pcbback" src="https://user-images.githubusercontent.com/37963774/39859319-cf669b98-5439-11e8-9d2e-31fc22400bc5.JPG">

<img width="500" alt="pcbback" src="https://user-images.githubusercontent.com/37963774/39859491-5725bf50-543a-11e8-86ae-32686be9a22b.JPG">


# About

The board was developed within the framework of semester project at the Institute of Automation, Measurement and Applied Informatics of the Faculty of Mechanical Engineering, Slovak University of Technology in Bratislava in 2017/2018. 

## Authors

* 3D-model design: Marcel Vdoleček
* Hardware design: Peter Šálka, Miloš Podbielančík, Dávid Šroba 
* Software design: Gábor Penzinger, Jakub Kulhánek
* Wiki documentation: Martin Lučan, Dávid Šroba, Miloš Podbielančík